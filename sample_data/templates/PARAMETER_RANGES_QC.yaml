globals:
  $baseURI: http://fdri.ceh.ac.uk/
  $datasetID: cosmos

imports:
  - namespaces.yaml
  - concept_schemes.yaml
  - extensions.py

one_offs:
  - name: RangeCheck
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/common/configuration-type/qc-range>"
      "@type": "<fdri:DataProcessingConfigurationType>"
      "<skos:prefLabel>": "Range Validation@en"
      "<rdfs:label>": "Range Validation@en"
      "<skos:inScheme>": "<::ConfigurationTypeScheme>"
      "^<skos:hasTopConcept>": "<::ConfigurationTypeScheme>"

  - name: Range
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/common/parameter/range>"
      "@type": "<fdri:ConfigurationParameter>"
      "<skos:prefLabel>": "Expected Range@en"
      "<rdfs:label>": "Expected Range@en"
      "<skos:inScheme>": "<::ConfigurationParameterScheme>"
      "^<skos:hasTopConcept>": "<::ConfigurationParameterScheme>"

  - name: MinMaxRange
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/common/method/min-max-range>"
      "@type": "<fdri:DataProcessingMethod>"
      "<skos:prefLabel>": "Min/Max range validation@en"
      "<rdfs:label>": "Min/Max range validation@en"
      "<skos:inScheme>": "<::DataProcessingMethodScheme>"
      "^<skos:hasTopConcept>": "<::DataProcessingMethodScheme>"

resources:
  - name: Configuration
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/data-processing-configuration/cosmos-qc-range-{TIMESERIES_ID|slug}>"
      "@type": "<fdri:InternalDataProcessingConfiguration>"
      "<fdri:appliesToTimeSeries>": <http://fdri.ceh.ac.uk/id/dataset/{TIMESERIES_ID|slug}>
      "<dct:type>": <::RangeCheck>

  - name: ConfigurationItem
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/configuration-item/cosmos-qc-range-{TIMESERIES_ID|slug}>"
      "@type": "<fdri:ConfigurationItem>"
      "<fdri:method>": "<::MinMaxRange>"
      "<fdri:argument>":
        name: ConfigurationArg
        properties:
          "@id": "<http://fdri.ceh.ac.uk/id/configuration-item/cosmos-qc-range-{TIMESERIES_ID|slug}#arg>"
          "@type": "<fdri:ConfigurationArgument>"
          "<fdri:parameter>": "<::Range>"
          "<fdri:hasValue>":
            name: ConfigurationValue
            properties:
              "@id": "<http://fdri.ceh.ac.uk/id/configuration-item/cosmos-qc-range-{TIMESERIES_ID|slug}#arg-value>"
              "@type": "<schema:PropertyValue>"
              "<schema:minValue>": "{MINVAL|asDecimal}"
              "<schema:maxValue>": "{MAXVAL|asDecimal}"
      "<fdri:interval>":
        name: Interval
        properties:
          "@id": "<http://fdri.ceh.ac.uk/id/configuration-item/cosmos-qc-range-{TIMESERIES_ID|slug}#interval>"
          "@type": "<dct:PeriodOfTime>"
          "<dcat:startDate>": "{| now}"
      "^<fdri:hasCurrentConfiguration>": "<http://fdri.ceh.ac.uk/id/data-processing-configuration/cosmos-qc-range-{TIMESERIES_ID|slug}>"
      "^<prov:hadPlan>": "<http://fdri.ceh.ac.uk/id/activity/qc-cosmos-{TIMESERIES_ID|slug}-1234>"
