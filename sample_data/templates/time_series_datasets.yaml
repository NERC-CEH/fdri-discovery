globals:
    $baseURI: http://fdri.ceh.ac.uk/
    $datasetID: cosmos

imports:
    - namespaces.yaml
    - concept_schemes.yaml
    - extensions.py

one_offs:
  - name: CosmosProgramme
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/programme/cosmos>"
      "@type": "<fdri:EnvironmentalMonitoringProgramme>"
      "<rdfs:label>": "COSMOS Programme@en"
      "<fdri:utilises>": "<http://fdri.ceh.ac.uk/id/network/cosmos>"  

  - name: COPScheme
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/common/cop>"
      "@type": "<fdri:VariableScheme>"

  - name: TimeSeriesDataset
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/common/object-of-interest/time-series-dataset>"
      "@type": "<skos:Concept>"
      "<skos:prefLabel>": "Time-series Dataset@en"
      "<rdfs:label>": "Time-series Dataset@en"
      "<skos:inScheme>": <::ObjectOfInterestScheme>
      "^<skos:hasTopConcept>": <::ObjectOfInterestScheme>

  - name: ObservationCompleteness
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/common/parameter/observation-completeness>"
      "@type": "<skos:Concept>"
      "<skos:prefLabel>": "Observation Completeness@en"
      "<rdfs:label>": "Observation Completeness@en"
      "<skos:inScheme>": <::ParameterScheme>
      "^<skos:hasTopConcept>": <::ParameterScheme>

  - name: SuspectObservations
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/common/parameter/suspect-observations>"
      "@type": "<skos:Concept>"
      "<skos:prefLabel>": "Suspect Observations@en"
      "<rdfs:label>": "Suspect Observations@en"
      "<skos:inScheme>": <::ParameterScheme>
      "^<skos:hasTopConcept>": <::ParameterScheme>

  - name: TimeSeriesCompleteness
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/common/cop/timeseries-completeness-percent>"
      "@type": "<fdri:Variable>"
      "<rdfs:label>": "Time-series Observation Completeness@en"
      "<skos:prefLabel>": "Time-series Observation Completeness@en"
      "<iop:hasObjectOfInterest>": "<::TimeSeriesDataset>"
      "<iop:hasProperty>": "<::ObservationCompleteness>"
      "<skos:inScheme>": <::COPScheme>
      "^<skos:hasTopConcept>": <::COPScheme>

  - name: FlaggedSuspectPercent
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/common/cop/timseries-flagged-suspect-percent>"
      "@type": "<fdri:Variable>"
      "<rdfs:label>": "Time-series Suspect Observations (Percent)@en"
      "<skos:prefLabel>": "Time-series Suspect Observations (Percent)@en"
      "<iop:hasObjectOfInterest>": "<::TimeSeriesDataset>"
      "<iop:hasProperty>": "<::SuspectObservations>"
      "<skos:inScheme>": <::COPScheme>
      "^<skos:hasTopConcept>": <::COPScheme>

  - name: CurrentYearQualifier
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/annotation/observation-period-2025>"
      "@type": "<fdri:Annotation>"
      "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/common/cop/observation-period>"
      "<fdri:hasValue>":
        name: CurrentYearQualifierValue
        properties:
          "@id": "<http://fdri.ceh.ac.uk/id/annotation/observation-period-2025#value>"
          "@type": "<schema:PropertyValue>"
          "<schema:minValue>": "2025-01-01T00:00:00Z^^<xsd:dateTime>"
          "<schema:maxValue>": "2025-12-31T23:59:59Z^^<xsd:dateTime>"

  - name: CurrentMonthQualifier
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/annotation/observation-period-2025-01>"
      "@type": "<fdri:Annotation>"
      "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/common/cop/observation-period>"
      "<fdri:hasValue>":
        name: CurrentMonthQualifierValue
        properties:
          "@id": "<http://fdri.ceh.ac.uk/id/annotation/observation-period-2025-01#value>"
          "@type": "<schema:PropertyValue>"
          "<schema:minValue>": "2025-01-01T00:00:00Z^^<xsd:dateTime>"
          "<schema:maxValue>": "2025-01-31T23:59:59Z^^<xsd:dateTime>"


resources:
  - name: SiteVarSeries
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/dataset/cosmos-{SITE_ID|slug}-{PARAMETER_ID|slug}-series>"
      "@type": "<fdri:ObservationDatasetSeries>"
      "<rdfs:label>": "All time-series for {PARAMETER_NAME} at {SITE_ID}@en"
      "<dct:title>": "All time-series for {PARAMETER_NAME} at {SITE_ID}@en"
      "<sosa:hasFeatureOfInterest>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<dct:spatial>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<fdri:processingLevel>": <http://fdri.ceh.ac.uk/ref/common/processing-level/mixed>
      "<sosa:observedProperty>": <http://fdri.ceh.ac.uk/ref/cosmos/cop/{PARAMETER_ID|slug}>
      "<fdri:originatingFacility>": <http://fdri.ceh.ac.uk/id/site/cosmos-{SITE_ID|slug}>
      "<fdri:originatingProgramme>": <::CosmosProgramme>

  - name: SiteSeries
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/dataset/cosmos-{SITE_ID|slug}>"
      "@type": "<fdri:ObservationDatasetSeries>"
      "<rdfs:label>": "All time-series from {SITE_ID}@en"
      "<dct:title>": "All time-series from {SITE_ID}@en"
      "<sosa:hasFeatureOfInterest>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<dct:spatial>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<fdri:processingLevel>": <http://fdri.ceh.ac.uk/ref/common/processing-level/mixed>
      "<sosa:observedProperty>": <http://fdri.ceh.ac.uk/ref/cosmos/cop/{PARAMETER_ID|slug}>
      "<fdri:originatingFacility>": <http://fdri.ceh.ac.uk/id/site/cosmos-{SITE_ID|slug}>
      "<fdri:originatingProgramme>": <::CosmosProgramme>

  - name: SiteTimeSeriesDataset
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/dataset/cosmos-{SITE_ID|slug}-{TIMESERIES_ID|slug}>"
      "@type": "<fdri:TimeSeriesDataset>"
      "<dct:type>": "<http://fdri.ceh.ac.uk/ref/cosmos/time-series/{TIMESERIES_ID|slug}>"
      "<dct:title>": "{TIMESERIES_NAME} at {SITE_ID}@en"
      "<rdfs:label>": "{TIMESERIES_NAME} at {SITE_ID}@en"
      "<sosa:observedProperty>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/{PARAMETER_ID|slug}>"
      "<sosa:hasFeatureOfInterest>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<dct:spatial>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<dcat:temporalResolution>": "{PERIOD}^^<xsd:duration>"
      "<dcat:inSeries>":
        - <::SiteVarSeries>
        - <::SiteSeries>
      "<fdri:processingLevel>": "<http://fdri.ceh.ac.uk/ref/common/processing-level/{PROCESSING_LEVEL|slug}>"
      "<fdri:originatingFacility>": "<http://fdri.ceh.ac.uk/id/site/cosmos-{SITE_ID|slug}>"
      "<fdri:originatingProgramme>": <::CosmosProgramme>
      "<fdri:hasAnnotation>":
        - name: CompletenessWholePeriod
          properties:
            "@id" : "<_>"
            "@type": "<fdri:Annotation>"
            "<fdri:property>": "<::TimeSeriesCompleteness>"
            "<fdri:hasValue>":
              name: "CompletenessWholePeriodValue"
              properties:
                "@id": <_>
                "@type": "<schema:PropertyValue>"
                "<schema:value>": "99.7^^<xsd:decimal>"
        - name: CompletenessCurrentYear
          properties:
            "@id" : "<_>"
            "@type": "<fdri:Annotation>"
            "<fdri:property>": "<::TimeSeriesCompleteness>"
            "<fdri:hasValue>":
              name: "CompletenessCurrentYearValue"
              properties:
                "@id": <_>
                "@type": "<schema:PropertyValue>"
                "<schema:value>": "99.8^^<xsd:decimal>"
                "<fdri:qualifier>": <::CurrentYearQualifier>
        - name: CompletenessCurrentMonth
          properties:
            "@id" : "<_>"
            "@type": "<fdri:Annotation>"
            "<fdri:property>": "<::TimeSeriesCompleteness>"
            "<fdri:hasValue>":
              name: "CompletenessCurrentMonthPeriodValue"
              properties:
                "@id": <_>
                "@type": "<schema:PropertyValue>"
                "<schema:value>": "99.8^^<xsd:decimal>"
                "<fdri:qualifier>": <::CurrentMonthQualifier>
        - name: FlaggedSuspectPercentCurrentYear
          properties:
            "@id" : "<_>"
            "@type": "<fdri:Annotation>"
            "<fdri:property>": <::FlaggedSuspectPercent>
            "<fdri:hasValue>":
              name: "FlaggedSuspectPercentCurrentYearValue"
              properties:
                "@id": <_>
                "@type": "<schema:PropertyValue>"
                "<schema:value>": "0.2^^<xsd:decimal>"
                "<fdri:qualifier>": <::CurrentYearQualifier>
