globals:
    $baseURI: http://fdri.ceh.ac.uk/
    $datasetID: cosmos

imports:
    - namespaces.yaml
    - extensions.py

one_offs:
  - name: CosmosProgramme
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/programme/cosmos>"
      "@type": "<fdri:EnvironmentalMonitoringProgramme>"
      "<rdfs:label>": "COSMOS Programme@en"
      "<fdri:utilises>": "<http://fdri.ceh.ac.uk/id/network/cosmos>"

resources:
  - name: SiteVarSeries
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/dataset/cosmos-{SITE_ID|slug}-{PARAMETER_ID|slug}-series>"
      "@type": "<fdri:ObservationDatasetSeries>"
      "<rdfs:label>": "All time-series for {PARAMETER_NAME} at {SITE_ID}@en"
      "<dct:title>": "All time-series for {PARAMETER_NAME} at {SITE_ID}@en"
      "<sosa:hasFeatureOfInterest>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<dct:spatial>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<fdri:processingLevel>": <http://fdri.ceh.ac.uk/ref/common/processing-level/mixed>
      "<sosa:observedProperty>": <http://fdri.ceh.ac.uk/ref/cosmos/cop/{PARAMETER_ID|slug}>
      "<fdri:originatingFacility>": <http://fdri.ceh.ac.uk/id/site/cosmos-{SITE_ID|slug}>
      "<fdri:originatingProgramme>": <::CosmosProgramme>

  - name: SiteSeries
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/dataset/cosmos-{SITE_ID|slug}>"
      "@type": "<fdri:ObservationDatasetSeries>"
      "<rdfs:label>": "All time-series from {SITE_ID}@en"
      "<dct:title>": "All time-series from {SITE_ID}@en"
      "<sosa:hasFeatureOfInterest>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<dct:spatial>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<fdri:processingLevel>": <http://fdri.ceh.ac.uk/ref/common/processing-level/mixed>
      "<sosa:observedProperty>": <http://fdri.ceh.ac.uk/ref/cosmos/cop/{PARAMETER_ID|slug}>
      "<fdri:originatingFacility>": <http://fdri.ceh.ac.uk/id/site/cosmos-{SITE_ID|slug}>
      "<fdri:originatingProgramme>": <::CosmosProgramme>

  - name: SiteTimeSeriesDataset
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/dataset/cosmos-{SITE_ID|slug}-{TIMESERIES_ID|slug}>"
      "@type": "<fdri:TimeSeriesDataset>"
      "<dct:type>": "<http://fdri.ceh.ac.uk/ref/cosmos/time-series/{TIMESERIES_ID|slug}>"
      "<dct:title>": "{TIMESERIES_NAME} at {SITE_ID}@en"
      "<rdfs:label>": "{TIMESERIES_NAME} at {SITE_ID}@en"
      "<sosa:observedProperty>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/{PARAMETER_ID|slug}>"
      "<sosa:hasFeatureOfInterest>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<dct:spatial>": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
      "<dcat:temporalResolution>": "{PERIOD}^^<xsd:duration>"
      "<dcat:inSeries>":
        - <::SiteVarSeries>
        - <::SiteSeries>
      "<fdri:processingLevel>": "<http://fdri.ceh.ac.uk/ref/common/processing-level/{PROCESSING_LEVEL|slug}>"
      "<fdri:originatingFacility>": "<http://fdri.ceh.ac.uk/id/site/cosmos-{SITE_ID|slug}>"
      "<fdri:originatingProgramme>": <::CosmosProgramme>
      "<fdri:hasAnnotation>":
        - name: S3BucketAnnotation
          properties:
            "@id": "<_>"
            "@type": "<fdri:Annotation>"
            "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/source_bucket>"
            "<fdri:hasValue>":
              name: S3BucketAnnotationValue
              properties:
                "@id": "<_>"
                "@type": <schema:PropertyValue>
                "<schema:value>": "{S3_BUCKET}"
        - name: S3DatasetAnnotation
          properties:
            "@id": "<_>"
            "@type": "<fdri:Annotation>"
            "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/source_dataset>"
            "<fdri:hasValue>":
              name: S3DatasetAnnotationValue
              properties:
                "@id": "<_>"
                "@type": <schema:PropertyValue>
                "<schema:value>": "{S3_DATASET}"
        - name: S3ColumnNameAnnotation
          properties:
            "@id": "<_>"
            "@type": "<fdri:Annotation>"
            "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/source_column_name>"
            "<fdri:hasValue>":
              name: S3ColumnNameAnnotation
              properties:
                "@id": "<_>"
                "@type": <schema:PropertyValue>
                "<schema:value>": "{COLUMN_NAME}"
