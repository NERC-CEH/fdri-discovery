globals:
    $baseURI: http://fdri.ceh.ac.uk/
    $datasetID: cosmos

imports:
    - namespaces.yaml
    - extensions.py

one_offs:
  - name: RegionScheme
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/region>"
      "@type": "<skos:ConceptScheme>"
      "<dct:title>": "COSMOS Regions@en"
  - name: SoilTypeScheme
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/soil-type>"
      "@type": "<skos:ConceptScheme>"
      "<dct:title>": "COSMOS Soil Type Classification Scheme@en"
  - name: BedrockClassScheme
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/bedrock-class>"
      "@type": "<skos:ConceptScheme>"
      "<dct:title>": "COSMOS Bedrock Classification Scheme@en"
  - name: Cosmos
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/network/cosmos>"
      "@type": "<fdri:EnvironmentalMonitoringNetwork>"
      "<rdfs:label>": "COSMOS Network@en"
  - name: CosmosProgramme
    properties:
      "@id": "<http://fdri.ceh.ac.uk/id/programme/cosmos>"
      "@type": "<fdri:EnvironmentalMonitoringProgramme>"
      "<rdfs:label>": "COSMOS Programme@en"
  - name: Classification
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/parameter/classification>
      "@type": <qudt:QuantityKind>
  - name: SoilType
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-soil-type>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Site Soil Type@en"
      "<iop:hasProperty>": <::Classification>
      "<iop:hasObjectOfInterest>": <http://fdri.ceh.ac.uk/ref/common/object-of-interest/soil>
      "<fdri:valueScheme>": <::SoilTypeScheme>
  - name: PublicAccess
    properties:
      "@id":  <http://fdri.ceh.ac.uk/ref/common/parameter/public-access>
      "@type": <qudt:QuantityKind>
  - name: CosmosSite
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/object-of-interest/cosmos-site>
      "@type": <fdri:ObjectOfInterest>
      "<skos:prefLabel>": "COSMOS network site@en"
  - name: Public
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-public>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Site Is Public@en"
      "<iop:hasProperty>": <::PublicAccess>
      "<iop:hasObjectOfInterest>": <::CosmosSite>
  - name: MonitorsSnow
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/parameter/monitors-snow>
      "@type": <qudt:QuantityKind>
  - name: Snow
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-snow>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Site Monitors Snow@en"
      "<iop:hasProperty>": <::MonitorsSnow>
      "<iop:hasObjectOfInterest>": <::CosmosSite>
  - name: PLocationSource
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/parameter/location-source>
      "@type": <qudt:QuantityKind>
  - name: LocationSource
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-location-source>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Site location source@en"
      "<iop:hasProperty>": <::PLocationSource>
      "<iop:hasObjectOfInterest>": <::CosmosSite>
  - name: Bedrock
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/object-of-interest/bedrock>
      "@type": <fdri:ObjectOfInterest>
      "<skos:prefLabel>": "Bedrock@en"
  - name: BedrockClass
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-bedrock-class>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Site bedrock classification@en"
      "<iop:hasProperty>": <::Classification>
      "<iop:hasObjectOfInterest>": <::Bedrock>
      "<fdri:valueScheme>": <::BedrockClassScheme>
  - name: BedrockSuperClass
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-bedrock-superclass>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Site bedrock classification (superclass)@en"
      "<iop:hasProperty>": <::Classification>
      "<iop:hasObjectOfInterest>": <::Bedrock>
      "<fdri:valueScheme>": <::BedrockClassScheme>
  - name: BedrockSuperSeries
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-bedrock-superseries>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Site bedrock classification (superseries)@en"
      "<iop:hasProperty>": <::Classification>
      "<iop:hasObjectOfInterest>": <::Bedrock>
      "<fdri:valueScheme>": <::BedrockClassScheme>
  - name: Saar
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/parameter/saar>
      "@type": <qudt:QuantityKind>
  - name: SaarValue
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-saar-1961-1990>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "SAAR 1961-1990@en"
      "<iop:hasProperty>": <::Saar>
      "<iop:hasObjectOfInterest>": <::CosmosSite>
  - name: SiteClass
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-class>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Site classification@en"
      "<iop:hasProperty>": <::Classification>
      "<iop:hasObjectOfInterest>": <::CosmosSite>
  - name: CosmosSiteImages
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/object-of-interest/cosmos-site-images>
      "@type": <fdri:ObjectOfInterest>
  - name: WebImages
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-web-images>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Site web image count@en"
      "<iop:hasProperty>": <http://fdri.ceh.ac.uk/ref/common/parameter/count>
      "<iop:hasObjectOfInterest>": <::CosmosSiteImages>
  - name: CosmosSiteHost
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/object-of-interest/cosmos-site-host>
      "@type": <fdri:ObjectOfInterest>
  - name: SiteClass
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/host-class>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Site host classification@en"
      "<iop:hasProperty>": <::Classification>
      "<iop:hasObjectOfInterest>": <::CosmosSiteHost>
  - name: Calibrated
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/parameter/calibrated>
      "@type": <qudt:QuantityKind>
  - name: StationCalibrated
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/station-calibrated>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Station calibrated@en"
      "<iop:hasProperty>": <::Calibrated>
      "<iop:hasObjectOfInterest>": <http://fdri.ceh.ac.uk/ref/common/object-of-interest/cosmos-site>
  - name: MonitorsFlux
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/parameter/monitors-flux>
      "@type": <qudt:QuantityKind>
  - name: StationFlux
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/station-flux>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Station flux@en"
      "<iop:hasProperty>": <::MonitorsFlux>
      "<iop:hasObjectOfInterest>": <http://fdri.ceh.ac.uk/ref/common/object-of-interest/cosmos-site>
  - name: Crs2IsMod
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/parameter/crs2-mod>
      "@type": <qudt:QuantityKind>
  - name: StationCrs2Mod
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/station-crs2-mod>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Station CRS2 is MOD@en"
      "<iop:hasProperty>": <::Crs2IsMod>
      "<iop:hasObjectOfInterest>": <http://fdri.ceh.ac.uk/ref/common/object-of-interest/cosmos-site>
  - name: FullTdtArray
    properties:
      "@id": <http://fdri.ceh.ac.uk/ref/common/parameter/full-tdt-array>
      "@type": <qudt:QuantityKind>
  - name: StationFullTdtArray
    properties:
      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/station-full-tdt-array>"
      "@type": <fdri:Variable>
      "<skos:prefLabel>": "Station has full TDT array@en"
      "<iop:hasProperty>": <::FullTdtArray>
      "<iop:hasObjectOfInterest>": <http://fdri.ceh.ac.uk/ref/common/object-of-interest/cosmos-site>

resources:
    - name: MonitoredFeature
      properties:
        "@id": "<http://fdri.ceh.ac.uk/id/feature/cosmos-{SITE_ID|slug}>"
        "@type": "<fdri:GeospatialFeatureOfInterest>"
        "<rdfs:label>": "Environment at {SITE_NAME}@en"
        "<geos:hasGeometry>": 
            - name: EastingsNorthingsPoint
              properties:
                "@id": "<_>"
                "@type": "<geos:Geometry>"
                "<geos:asWKT>": "<http://www.opengis.net/def/crs/EPSG/0/27700> POINT({EASTING}, {NORTHING})^^<geos:wktLiteral>"
            - name: LatLongPoint
              properties:
                "@id": "<_>"
                "@type": "<geos:Geometry>"
                "<geos:asWKT>": "POINT({LONGITUDE}, {LATITUDE})^^<geos:wktLiteral>"
        "<fdri:hasRepresentativePoint>": 
            - name: LatLongRepPoint
              properties:
                "@id": "<_>"
                "@type": "<geos:Geometry>"
                "<geos:asWKT>": "POINT({LONGITUDE}, {LATITUDE})^^<geos:wktLiteral>"
        "<geo:lat>": "{LATITUDE}"
        "<geo:long>": "{LONGITUDE}"
        "<spatialrelations:easting>": "{EASTING}"
        "<spatialrelations:northing>": "{NORTHING}"

    - name: MonitoringSite
      properties:
        "@id": "<http://fdri.ceh.ac.uk/id/site/cosmos-{SITE_ID|slug}>"
        "@type": <fdri:EnvironmentalMonitoringSite>
        "<rdfs:label>": "{SITE_NAME}@en"
        "<rdfs:comment>": "{SITE_DESC}@en"
        "^<fdri:contains>": <::Cosmos>
        "^<fdri:utilises>": <::CosmosProgramme>
        "<geos:hasGeometry>": 
            - name: EastingsNorthingsPoint
              properties:
                "@id": "<_>"
                "@type": "<geos:Geometry>"
                "<geos:asWKT>": "<http://www.opengis.net/def/crs/EPSG/0/27700> POINT({EASTING}, {NORTHING})^^<geos:wktLiteral>"
            - name: LatLongPoint
              properties:
                "@id": "<_>"
                "@type": "<geos:Geometry>"
                "<geos:asWKT>": "POINT({LONGITUDE}, {LATITUDE})^^<geos:wktLiteral>"
        "<geo:lat>": "{LATITUDE}"
        "<geo:long>": "{LONGITUDE}"
        "<spatialrelations:easting>": "{EASTING}"
        "<spatialrelations:northing>": "{NORTHING}"
        "<fdri:altitude>": "{ALTITUDE | asDecimal}"
        "<fdri:operatingPeriod>":
          - name: OperatingPeriod
            properties:
              "@id": "<_>"
              "@type": "<dct:PeriodOfTime>"
              "<dcat:startDate>": "{DATE_INSTALLED | asDateOrDatetime}"
              "<dcat:endDate>": "{DATE_DECOMMISSIONED | asDateOrDatetime}"
        "<fdri:inRegion>":
          - name: InRegionSeries
            requires:
              REGION:
            properties:
              "@id": "<_>"
              "@type": "<fdri:PropertyValueSeries>"
              "<fdri:hasCurrentValue>":
                name: InRegionCurrentValue
                properties:
                  "@id": "<_>"
                  "@type": "<fdri:TimeBoundPropertyValue>"
                  "<schema:valueReference>":
                    name: RegionConcept
                    properties:
                      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/region/{REGION | slug}>"
                      "@type": "<skos:Concept>"
                      "<skos:prefLabel>": "{REGION}@en"
                      "<skos:inScheme>": "<::RegionScheme>"
                      "^<skos:hasTopConcept>": "<::RegionScheme>"
                  "<fdri:interval>":
                    name: InRegionCurrentValueInterval
                    properties:
                      "@id": "<_>"
                      "@type": "<dct:PeriodOfTime>"
                      "<dcat:startDate>": "{DATE_INSTALLED | asDateOrDatetime}"
        "<fdri:hasAnnotation>":
          - name: SoilType
            requires:
              SOIL_TYPE:
            properties:
              "@id" : "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-soil-type>"
              "<fdri:hasValue>":
                name: "SoilTypeValue"
                properties:
                  "@id": <_>
                  "@type": "<schema:PropertyValue>"
                  "<schema:valueReference>":
                    name: SoilTypeConcept
                    properties:
                      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/soil-type/{SOIL_TYPE | slug}>"
                      "@type": "<skos:Concept>"
                      "<skos:prefLabel>": "{SOIL_TYPE}@en"
                      "<skos:inScheme>": <::SoilTypeScheme>
                      "^<skos:hasTopConcept>": "<::SoilTypeScheme>"
          - name: Public
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-public>"
              "<fdri:hasValue>":
                name: "PublicValue"
                properties:
                  "@id": <_>
                  "@type": "<schema:PropertyValue>"
                  "<schema:value>": "{IS_PUBLIC | asBoolean('y')}"
          - name: Snow
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-snow>"
              "<fdri:hasValue>":
                name: "SnowValue"
                properties:
                  "@id": <_>
                  "@type": "<schema:PropertyValue>"
                  "<schema:value>": "{SNOW | asBoolean('y')}"
          - name: LocationSource
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-location-source>"
              "<fdri:hasValue>":
                name: "LocationSourceValue"
                properties:
                  "@id": <_>
                  "@type": "<schema:PropertyValue>"
                  "<schema:value>": "{LOCATION_SOURCE}"
          - name: BedrockClass
            requires:
              BEDROCK_CLASS:
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-bedrock-class>"
              "<fdri:hasValue>":
                name: "BedrockClassValue"
                properties:
                  "@id": <_>
                  "@type": "<schema:PropertyValue>"
                  "<schema:valueReference>":
                    name: BedrockClassConcept
                    properties:
                      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/bedrock-class/{BEDROCK_CLASS|slug}>"
                      "@type": "<skos:Concept>"
                      "<skos:prefLabel>": "{BEDROCK_CLASS}@en"
                      "<skos:inScheme>": "<::BedrockClassScheme>"
                      "^<skos:hasTopConcept>": "<::BedrockClassScheme>"
          - name: BedrockSuperclass
            # Should maybe be a broader concept of bedrock class?
            requires:
              SUPER_CLASS:
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-bedrock-superclass>"
              "<fdri:hasValue>":
                name: "BedrockSuperclassValue"
                properties:
                  "@id": <_>
                  "@type": "<schema:PropertyValue>"
                  "<schema:valueReference>":
                    name: BedrockClassConcept
                    properties:
                      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/bedrock-class/{SUPER_CLASS|slug}>"
                      "@type": "<skos:Concept>"
                      "<skos:prefLabel>": "{SUPER_CLASS}@en"
                      "<skos:inScheme>": "<::BedrockClassScheme>"
                      "^<skos:hasTopConcept>": "<::BedrockClassScheme>"
          - name: SuperSeries
            # QUESTION: Is this related to bedrock or soil?
            # If the former, should maybe be a broader concept of bedrock super class?
            requires:
              SUPER_SERIES:
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-bedrock-superseries>"
              "<fdri:hasValue>":
                name: "BedrockSuperSeriesValue"
                properties:
                  "@id": "<_>"
                  "@type": "<schema:PropertyValue>"
                  "<schema:valueReference>":
                    name: BedrockClassConcept
                    properties:
                      "@id": "<http://fdri.ceh.ac.uk/ref/cosmos/bedrock-class/{SUPER_SERIES|slug}>"
                      "@type": "<skos:Concept>"
                      "<skos:prefLabel>": "{SUPER_SERIES}@en"
                      "<skos:inScheme>": "<::BedrockClassScheme>"
                      "^<skos:hasTopConcept>": "<::BedrockClassScheme>"
          - name: Saar
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-saar-1961-1990>"
              "<fdri:hasValue>":
                name: SaarValue
                properties:
                  "@id": "<_>"
                  "@type": "<schema:PropertyValue>"
                  "<schema:value>": "{SAAR_1961_1990 | asDecimal}"
          - name: SiteClass
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-class>"
              "<fdri:hasValue>":
                name: SiteClassValue
                # QUESTION: Is this actually a controlled vocabulary?
                properties:
                  "@id": "<_>"
                  "@type": "<schema:PropertyValue>"
                  "<schema:value>": "{SITE_CLASS | asDecimal}"
          - name: WebImages
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/site-web-images>"
              "<fdri:hasValue>":
                name: WebImagesValue
                properties:
                  "@id": "<_>"
                  "@type": "<schema:PropertyValue>"
                  # NOTE: Should be converted to integer. Not sure why it is a decimal in the CSV
                  "<schema:value>": "{WEB_IMAGES | asInt}"
          - name: HostClass
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/host-class>"
              "<fdri:hasValue>":
                name: HostClassValue
                # QUESTION: Is this actually a controlled vocabulary?
                properties:
                  "@id": "<_>"
                  "@type": "<schema:PropertyValue>"
                  "<schema:value>": "{HOST_CLASS | asDecimal}"
          - name: Calibrated
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/station-calibrated>"
              "<fdri:hasValue>":
                name: "CalibratedValue"
                properties:
                  "@id": <_>
                  "@type": "<schema:PropertyValue>"
                  "<schema:value>": "{CALIBRATED | asBoolean('y')}"
          - name: Flux
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/station-flux>"
              "<fdri:hasValue>":
                name: "FluxValue"
                properties:
                  "@id": <_>
                  "@type": "<schema:PropertyValue>"
                  "<schema:value>": "{FLUX | asBoolean('y')}"
          - name: Crs2IsMod
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/station-crs2-mod>"
              "<fdri:hasValue>":
                name: "Crs2IsModValue"
                properties:
                  "@id": <_>
                  "@type": "<schema:PropertyValue>"
                  "<schema:value>": "{CRS2_IS_MOD | asBoolean('y')}"
          - name: FullTdtArray
            properties:
              "@id": "<_>"
              "@type": "<fdri:Annotation>"
              "<fdri:property>": "<http://fdri.ceh.ac.uk/ref/cosmos/cop/station-full-tdt-array>"
              "<fdri:hasValue>":
                name: "FullTdtArrayValue"
                properties:
                  "@id": <_>
                  "@type": "<schema:PropertyValue>"
                  "<schema:value>": "{FULL_TDT_ARRAY | asBoolean('y')}"

